From 7a241d96977d2f361c0c58ecc8350c0f8d982ab5 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Petr=20P=C3=ADsa=C5=99?= <ppisar@redhat.com>
Date: Tue, 27 Mar 2012 13:33:59 +0200
Subject: [PATCH] Fix IO::Uncompress::Unzip-nextStream() to return 0 on last
 stream

Back-ported from 2.030.
---
 ext/IO-Compress/lib/IO/Uncompress/Base.pm |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/ext/IO-Compress/lib/IO/Uncompress/Base.pm b/ext/IO-Compress/lib/IO/Uncompress/Base.pm
index 4507219..27d6011 100644
--- a/ext/IO-Compress/lib/IO/Uncompress/Base.pm
+++ b/ext/IO-Compress/lib/IO/Uncompress/Base.pm
@@ -980,7 +980,7 @@ sub gotoNextStream
     #*$self->{EndStream} = 0 ;
 
     if ( ! defined $magic) {
-        if (! *$self->{Transparent} )
+        if (! *$self->{Transparent} || $self->eof())
         {
             *$self->{EndStream} = 1 ;
             return 0;
-- 
1.7.7.6

