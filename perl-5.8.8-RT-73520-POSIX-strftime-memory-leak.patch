From c4bc4aaaeaf5ebf3d6c5758fe61c1f0dd3864b9a Mon Sep 17 00:00:00 2001
From: Tony Cook <tony@develop-help.com>
Date: Sun, 11 Jul 2010 21:23:30 +1000
Subject: [PATCH] RT #73520: POSIX::strftime memory leak

Tested before/after with valgrind.
---
 util.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/util.c b/util.c
index 652e868..b3b385e 100644
--- a/util.c
+++ b/util.c
@@ -4234,7 +4234,7 @@ Perl_my_strftime(pTHX_ const char *fmt, int sec, int min, int hour, int mday, in
     const int fmtlen = strlen(fmt);
     int bufsize = fmtlen + buflen;
 
-    Newx(buf, bufsize, char);
+    Renew(buf, bufsize, char);
     while (buf) {
       buflen = strftime(buf, bufsize, fmt, &mytm);
       if (buflen > 0 && buflen < bufsize)
-- 
1.7.7.6

